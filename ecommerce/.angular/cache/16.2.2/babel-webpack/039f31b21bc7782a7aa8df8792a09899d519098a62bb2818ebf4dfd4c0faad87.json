{"ast":null,"code":"var _class;\nimport { Command } from \"../models/command\";\nimport { CommandDetail } from \"../models/commanddetail\";\nimport { CartItem } from \"../models/cart-item\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../product.service\";\nimport * as i2 from \"../command.service\";\nimport * as i3 from \"../auth.service\";\nimport * as i4 from \"@angular/common\";\nfunction CommandsListComponent_div_8_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"div\", 12)(2, \"div\", 13)(3, \"div\");\n    i0.ɵɵelement(4, \"img\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 15)(6, \"h5\", 16);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 17);\n    i0.ɵɵelement(9, \"h4\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const detail_r3 = ctx.$implicit;\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\" \", detail_r3.product, \" \");\n  }\n}\nfunction CommandsListComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"div\", 8)(2, \"div\", 9)(3, \"h5\", 5);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(5, CommandsListComponent_div_8_div_5_Template, 10, 1, \"div\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const command_r1 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(command_r1.date);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", command_r1.details);\n  }\n}\nexport class CommandsListComponent {\n  constructor(productService, commandService, authService) {\n    this.productService = productService;\n    this.commandService = commandService;\n    this.authService = authService;\n  }\n  ngOnInit() {\n    this.commandService.getCommandsById(this.authService.getAuthUser()).subscribe(response => {\n      this.parseCommands(response).then(commands => {\n        this.commands = commands;\n      });\n    });\n  }\n  getProduct(id) {\n    let product = {\n      brand: \"\",\n      category: \"\",\n      description: \"\",\n      discountPercentage: 0,\n      id: 0,\n      images: [],\n      price: 0,\n      rating: 0,\n      stock: 0,\n      thumbnail: \"\",\n      title: \"\"\n    };\n    this.productService.getProductById(id).subscribe(response => {\n      product = response;\n    });\n    return product;\n  }\n  parseCommands(response) {\n    return response.json().then(commandsData => {\n      const promises = commandsData.map(commandData => {\n        const detailsPromises = commandData.detailsCommandes.map(detailData => {\n          return this.productService.getProductById(detailData.product).toPromise().then(product => {\n            return new CommandDetail(new CartItem(product, detailData.qte));\n          });\n        });\n        return Promise.all(detailsPromises).then(details => {\n          return new Command(details, commandData.id, new Date(commandData.dateCommande));\n        });\n      });\n      return Promise.all(promises);\n    });\n  }\n}\n_class = CommandsListComponent;\n_class.ɵfac = function CommandsListComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i2.CommandService), i0.ɵɵdirectiveInject(i3.AuthService));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-commands-list\"]],\n  decls: 9,\n  vars: 1,\n  consts: [[1, \"row\", 2, \"display\", \"flex\", \"justify-content\", \"center\", \"align-items\", \"center\", \"height\", \"100vh\"], [1, \"col-xxl-8\", \"col-12\"], [1, \"card\"], [1, \"card-body\"], [1, \"mb-6\"], [1, \"mb-0\"], [\"class\", \"mb-8\", 4, \"ngFor\", \"ngForOf\"], [1, \"mb-8\"], [1, \"border-bottom\", \"mb-3\", \"pb-3\", \"d-lg-flex\", \"align-items-center\", \"justify-content-between\"], [1, \"d-flex\", \"align-items-center\", \"justify-content-between\"], [\"class\", \"row justify-content-between align-items-center\", 4, \"ngFor\", \"ngForOf\"], [1, \"row\", \"justify-content-between\", \"align-items-center\"], [1, \"col-lg-8\", \"col-12\"], [1, \"d-md-flex\"], [3, \"src\"], [1, \"ms-md-4\", \"mt-2\", \"mt-lg-0\"], [1, \"mb-1\"], [1, \"mt-3\"]],\n  template: function CommandsListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"h4\", 5);\n      i0.ɵɵtext(6, \"Commandes\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"p\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(8, CommandsListComponent_div_8_Template, 6, 2, \"div\", 6);\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngForOf\", ctx.commands);\n    }\n  },\n  dependencies: [i4.NgForOf],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["Command","CommandDetail","CartItem","i0","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵtext","ɵɵadvance","ɵɵtextInterpolate1","detail_r3","product","ɵɵtemplate","CommandsListComponent_div_8_div_5_Template","ɵɵtextInterpolate","command_r1","date","ɵɵproperty","details","CommandsListComponent","constructor","productService","commandService","authService","ngOnInit","getCommandsById","getAuthUser","subscribe","response","parseCommands","then","commands","getProduct","id","brand","category","description","discountPercentage","images","price","rating","stock","thumbnail","title","getProductById","json","commandsData","promises","map","commandData","detailsPromises","detailsCommandes","detailData","toPromise","qte","Promise","all","Date","dateCommande","ɵɵdirectiveInject","i1","ProductService","i2","CommandService","i3","AuthService","selectors","decls","vars","consts","template","CommandsListComponent_Template","rf","ctx","CommandsListComponent_div_8_Template"],"sources":["D:\\Studies\\Projects\\Angular\\ecommerce\\src\\app\\commands-list\\commands-list.component.ts","D:\\Studies\\Projects\\Angular\\ecommerce\\src\\app\\commands-list\\commands-list.component.html"],"sourcesContent":["import {Component, OnInit} from '@angular/core';\nimport {ProductService} from \"../product.service\";\nimport {CommandService} from \"../command.service\";\nimport {Command} from \"../models/command\";\nimport {AuthService} from \"../auth.service\";\nimport {ProductItem} from \"../models/product-item\";\nimport {CommandDetail} from \"../models/commanddetail\";\nimport {CartItem} from \"../models/cart-item\";\n\n@Component({\n  selector: 'app-commands-list',\n  templateUrl: './commands-list.component.html',\n  styleUrls: ['./commands-list.component.css']\n})\nexport class CommandsListComponent implements OnInit{\n\n  commands: Command[] | undefined;\n\n  constructor(private productService : ProductService, private commandService : CommandService, private authService : AuthService) {\n  }\n\n  ngOnInit(): void {\n\n    this.commandService.getCommandsById(this.authService.getAuthUser()).subscribe(response => {\n      this.parseCommands(response).then((commands: Command[]) => {\n        this.commands = commands;\n      });\n    });\n\n  }\n\n  getProduct(id: number):ProductItem{\n    let product: ProductItem ={\n      brand: \"\",\n      category: \"\",\n      description: \"\",\n      discountPercentage: 0,\n      id: 0,\n      images: [],\n      price: 0,\n      rating: 0,\n      stock: 0,\n      thumbnail: \"\",\n      title: \"\"\n    };\n    this.productService.getProductById(id).subscribe(response => {\n      product = response;\n    })\n    return product;\n  }\n\n  parseCommands(response: Response): Promise<Command[]> {\n    return response.json().then((commandsData: any[]) => {\n      const promises = commandsData.map((commandData: any) => {\n        const detailsPromises = commandData.detailsCommandes.map((detailData: any) => {\n          return this.productService.getProductById(detailData.product).toPromise().then((product: any) => {\n            return new CommandDetail(new CartItem(product, detailData.qte));\n          });\n        });\n        return Promise.all(detailsPromises).then((details: CommandDetail[]) => {\n          return new Command(details, commandData.id, new Date(commandData.dateCommande));\n        });\n      });\n      return Promise.all(promises);\n    });\n  }\n\n}\n","<div class=\"row\" style=\"display: flex; justify-content: center; align-items: center; height: 100vh\">\n  <div class=\"col-xxl-8 col-12\">\n    <!-- card -->\n    <div class=\"card\">\n      <!-- card body-->\n      <div class=\"card-body\">\n        <div class=\"mb-6\">\n          <h4 class=\"mb-0\">Commandes</h4>\n          <p></p>\n        </div>\n        <div class=\"mb-8\" *ngFor=\"let command of commands\">\n          <!-- Commande -->\n          <div class=\"border-bottom mb-3 pb-3 d-lg-flex align-items-center justify-content-between \">\n            <div class=\"d-flex align-items-center justify-content-between\">\n              <h5 class=\"mb-0\">{{command.date}}</h5> <!-- Command date + id? -->\n            </div>\n          </div>\n          <!-- details Commande -->\n          <div class=\"row justify-content-between align-items-center\" *ngFor=\"let detail of command.details\">\n            <!-- col -->\n            <div class=\"col-lg-8 col-12\">\n              <div class=\"d-md-flex\">\n                <div>\n                  <!-- img -->\n                  <img [src]=\"\">\n                </div>\n                <div class=\"ms-md-4 mt-2 mt-lg-0\">\n                  <!-- name + price -->\n                  <h5 class=\"mb-1\">\n                    {{detail.product}}\n                  </h5>\n                  <div class=\"mt-3\">\n                    <h4></h4>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n          </div>\n\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}